## Économiser la bande passante grâce aux Service Workers

### Identifiants

| GreenIT |  V2  |  V3  |  V4  |  V5  |
|:-------:|:----:|:----:|:----:|:----:|
|      |   |   |  60 |  |

RGESN : 3.2

### Catégories

| Cycle de vie |  Tiers  |  Responsable  |
|:---------:|:----:|:----:|
| 3. Réalisation (fabrication / développement) | Réseau | Architecte Logiciel/Développeur |

### Indications

| Degré de priorité |      Mise en oeuvre       |  Impact écologique    |
|:-------------------:|:-------------------------:|:---------------------:|
| 4 | 3 | 4 |

|Ressources Economisées                                      |
|:----------------------------------------------------------:|
|Réseau    |

### Description

La plupart des pages partagent une structure commune encadrant le « contenu utile ». On peut donc assez facilement les reconstituer par concaténation de trois ressources : un en-tête et un pied de page commun à toutes les pages, et le contenu propre à chacune. Cette concaténation peut s’effectuer directement dans le navigateur via un Service Worker. Avec l’en-tête et le pied de page mis en cache HTTP, on ne télécharge plus que le « contenu utile ».
Le serveur doit toutefois être capable de fournir à la fois la page complète pour l’accès initial et pour les navigateurs plus anciens ne supportant pas les Service Workers, et le fragment de la page, pour la concaténation par le Service Worker.
On concède ici un peu de temps processeur au niveau du terminal, une requête initiale supplémentaire pour le Service Worker, puis deux requêtes supplémentaires pour l’en-tête et le pied de page, contre de grosses économies concernant les quantités de données échangées par la suite, ainsi qu’un gain significatif sur le temps de chargement des pages.

### Exemple

Début 2020, Philip Walton a pu mesurer sur son blog une réduction des échanges réseau de près de 48%
et une amélioration des performances (First Contentful Paint) de plus de 52%
avec cette technique.

Source: https://philipwalton.com/articles/smaller-html-payloads-with-service-workers/

### Principe de validation

| Le nombre ... |     est inférieur ou égal à   |  
|-------------------|:-------------------------:|
| de pages chargées dans leur version complète | 1 |
