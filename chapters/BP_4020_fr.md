## Éviter les blocages dus aux traitements JavaScript trop longs

### Identifiants

| GreenIT |  V2  |  V3  |  V4  |
|:-------:|:----:|:----:|:----:|
|      |   |   |      |

### Catégories

| Cycle de vie |  Tiers  |  Responsable  |
|:---------:|:----:|:----:|
| 3. Réalisation (fabrication / développement) | Utilisateur/Terminal | Architecte Logiciel/Développeur |

### Indications

| Degré de priorité |      Mise en oeuvre       |  Impact écologique    |
|:-------------------:|:-------------------------:|:---------------------:|
| 4 | 3 | 4 |

|Ressources Economisées                                      |
|:----------------------------------------------------------:|
|Processeur    |

### Description

Lorsque le navigateur transforme le code en une page web, il doit accomplir plusieurs tâches avant de pouvoir afficher la page : analyser le script HTML, construire la structure et le contenu de la page web (DOM) et enfin exécuter son code CSS et JavaScript.

L’exécution du code JavaScript peut occuper les processeurs du terminal à plus de 90 %, ce qui bloque les autres traitements voire les interactions avec l’utilisateur. En sollicitant fortement le terminal, cela induit une consommation excessive qui impacte directement le cycle de recharge de la batterie et dégrade l’expérience utilisateur (sensation de lenteur). Ces deux aspects peuvent mener à un renouvellement du terminal utilisateur à cause d’une obsolescence perçue.

Pour éviter cela, découpez vos codes JavaScript en petites tâches exécutées au moment opportun et non pas avant.


### Exemple

Le Total Blocking Time (TBT) mesure le temps total occupé par des tâches longues (long tasks) durant l’activité principale du thread JavaScript. Une tâche longue est un traitement qui dure plus de 50 ms et qui monopolise le navigateur web. Il faut s’assurer que le TBT soit en dessous des 200 ms. La mesure peut s’effectuer avec LightHouse (https://web.dev/measure/) ou Web Page Test (https://webpagetest.org/).

### Principe de validation

| Le nombre ... |     est inférieur ou égal à   |  
|-------------------|:-------------------------:|
| La durée totale des tâches longues (TBT) est inférieure à   |  200 ms  |
