## Mettre en place une politique d'expiration et suppression des données

### Identifiants

| GreenIT | V2  | V3  | V4  | V5  |
| :-----: | :-: | :-: | :-: | :-: |
|         |     |     |     |     |

RGESN : 7.2

### Catégories

| Cycle de vie  |   Tiers    |       Responsable       |
| :-----------: | :--------: | :---------------------: |
| 4. Production | Datacenter | Administrateur systèmes |

### Indications

| Degré de priorité | Mise en oeuvre | Impact écologique |
| :---------------: | :------------: | :---------------: |
|         4         |       3        |         3         |

| Ressources Economisées |
| :--------------------: |
|  Stockage / Requêtes   |

### Description

Définir une durée de rétention de chaque donnée stockée afin de permettre sa suppression ou son archivage via un traitement (batch, durée de vie (“TTL”) en base de données…)

De nombreux SGBDR permettent de supprimer automatiquement et définitivement via un TTL (Time To Live) sur une table ou sur une donnée.
De plus, depuis la mise en place du RGPD, il est obligatoire de supprimer les données personnelles d’un utilisateur après une certaine durée ce qui va dans le sens de l’éco-conception.

### Exemple

Dans cet exemple en Java, sur une base Oracle, la durée de vie de la donnée expirera au bout de 5 jours

```java
String aKey = "myFirstKey";
String aData = "myFirstData";

try {
    DatabaseEntry theKey = new DatabaseEntry(aKey.getBytes("UTF-8"));
    DatabaseEntry theData = new DatabaseEntry(aData.getBytes("UTF-8"));

    WriteOptions wo = new WriteOptions();
    wo.setTTL(5); // TTL de 5 jours
    myDatabase.put(null,             // Transaction
                   theKey,           // Clé.
                   theData,          // valeur.
                   Put.NO_OVERWRITE,
                   wo);              // Options (incluant la durée de TTL).

} catch (Exception e) {
    // ...
}
```

### Principe de validation

| Le nombre ...                                             | est inférieur ou égal à |
| --------------------------------------------------------- | :---------------------: |
| de données stockées inutilisées et sans contrainte légale |            0            |
